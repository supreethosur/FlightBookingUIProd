{"ast":null,"code":"import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { ProceedBookingModel } from '../flight-search/Models/ProceedBookingModel';\nimport { FinalAmount } from './Models/FinalAmount';\nimport { PassangerModel } from './Models/PassangerModel';\nimport { SummaryModel } from './Models/SummaryModel';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"./Service/PassangerService\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction PassengerComponent_div_3_option_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const gender_r11 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", gender_r11);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", gender_r11, \" \");\n  }\n}\n\nfunction PassengerComponent_div_3_option_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const meals_r12 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", meals_r12);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", meals_r12, \" \");\n  }\n}\n\nfunction PassengerComponent_div_3_option_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const class_r13 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", class_r13);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", class_r13, \" \");\n  }\n}\n\nfunction PassengerComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵlistener(\"submit\", function PassengerComponent_div_3_Template_div_submit_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n\n      const _r3 = i0.ɵɵreference(6);\n\n      const _r4 = i0.ɵɵreference(12);\n\n      const _r5 = i0.ɵɵreference(18);\n\n      const _r7 = i0.ɵɵreference(25);\n\n      const _r9 = i0.ɵɵreference(32);\n\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.savePassangerDetails(_r3.value, _r4.value, _r5.value, _r7.value, _r9.value);\n    });\n    i0.ɵɵelementStart(1, \"form\");\n    i0.ɵɵelementStart(2, \"label\", 6);\n    i0.ɵɵtext(3, \"Passanger Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelement(5, \"input\", 7, 8);\n    i0.ɵɵelement(7, \"br\");\n    i0.ɵɵelementStart(8, \"label\", 9);\n    i0.ɵɵtext(9, \"Age\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"br\");\n    i0.ɵɵelement(11, \"input\", 10, 11);\n    i0.ɵɵelement(13, \"br\");\n    i0.ɵɵelementStart(14, \"label\", 12);\n    i0.ɵɵtext(15, \"Gender\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"br\");\n    i0.ɵɵelementStart(17, \"select\", 13, 14);\n    i0.ɵɵtemplate(19, PassengerComponent_div_3_option_19_Template, 2, 2, \"option\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"br\");\n    i0.ɵɵelementStart(21, \"label\", 16);\n    i0.ɵɵtext(22, \"Meals Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(23, \"br\");\n    i0.ɵɵelementStart(24, \"select\", 17, 18);\n    i0.ɵɵtemplate(26, PassengerComponent_div_3_option_26_Template, 2, 2, \"option\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(27, \"br\");\n    i0.ɵɵelementStart(28, \"label\", 19);\n    i0.ɵɵtext(29, \"Class\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(30, \"br\");\n    i0.ɵɵelementStart(31, \"select\", 20, 21);\n    i0.ɵɵtemplate(33, PassengerComponent_div_3_option_33_Template, 2, 2, \"option\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(34, \"br\");\n    i0.ɵɵelementStart(35, \"button\", 22);\n    i0.ɵɵtext(36, \" Add\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.addPassanger);\n    i0.ɵɵadvance(19);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.genderType);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.MealsType);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.Classes);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.addPassanger.invalid);\n  }\n}\n\nfunction PassengerComponent_table_4_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵelementStart(16, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function PassengerComponent_table_4_tr_16_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const passanger_r17 = restoredCtx.$implicit;\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return ctx_r19.deleteTicket(passanger_r17.ticketNo);\n    });\n    i0.ɵɵtext(17, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const passanger_r17 = ctx.$implicit;\n    const i_r18 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r18 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(passanger_r17.passangerName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(passanger_r17.age);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(passanger_r17.gender);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(passanger_r17.mealsType);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(passanger_r17.businessClass);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(passanger_r17.amount);\n  }\n}\n\nfunction PassengerComponent_table_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 24);\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵelementStart(2, \"th\");\n    i0.ɵɵtext(3, \"S.No.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"th\");\n    i0.ɵɵtext(5, \"Passanger Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Age\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Gender\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Meals Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Class\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Amount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, PassengerComponent_table_4_tr_16_Template, 18, 7, \"tr\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.summaryModel.passangerList);\n  }\n}\n\nfunction PassengerComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2, \"Ticket Amount \");\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\");\n    i0.ɵɵtext(6, \" Tax Amount \");\n    i0.ɵɵelementStart(7, \"span\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\");\n    i0.ɵɵtext(10, \"Service Charges \");\n    i0.ɵɵelementStart(11, \"span\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\");\n    i0.ɵɵtext(14, \"Total Amount \");\n    i0.ɵɵelementStart(15, \"span\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.amount.totalTicketAmount);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.amount.taxAmount);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.amount.serviceCharges);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.amount.finalAmount);\n  }\n}\n\nexport let PassengerComponent = /*#__PURE__*/(() => {\n  class PassengerComponent {\n    constructor(activatedRoute, passangerService, router) {\n      this.activatedRoute = activatedRoute;\n      this.passangerService = passangerService;\n      this.router = router;\n      this.submitted = 0;\n      this.passangerName = \"\";\n      this.gender = \"\";\n      this.mealsType = \"\";\n      this.journeyId = \"\";\n      this.isFormRequired = 0;\n      this.addpassangerModel = new PassangerModel();\n      this.pnr = 29;\n      this.userId = 0;\n      this.summaryModel = new SummaryModel();\n      this.amount = new FinalAmount();\n      this.proceedIpModel = new ProceedBookingModel();\n      this.pnrList = [];\n      this.finalSubmittedData = [];\n      this.Classes = ['Business', 'Non-Business'];\n      this.genderType = ['Male', 'Female'];\n      this.MealsType = ['Veg', 'Non-Veg'];\n      this.addPassanger = new FormGroup({\n        passangerName: new FormControl(\"\", [Validators.required]),\n        gender: new FormControl(\"\", [Validators.required]),\n        mealsType: new FormControl(\"\", [Validators.required]),\n        isBusinessClass: new FormControl(\"\", [Validators.required]),\n        age: new FormControl(\"\", [Validators.required])\n      });\n      this.activatedRoute.params.subscribe(params => {\n        // console.log(\"param changed\");\n        this.proceedIpModel = JSON.parse(params['jsonValue']);\n        console.log(JSON.stringify(this.proceedIpModel) + \"from passanger\");\n        console.log(this.proceedIpModel.pnr + \" pnr\");\n        console.dir(this.proceedIpModel + \" obj\");\n        this.pnr = this.proceedIpModel.pnr;\n        this.userId = this.proceedIpModel.userId;\n      });\n    }\n\n    ngOnInit() {}\n\n    savePassangerDetails(passangerName, age, gender, MealsType, isBusinessClass) {\n      console.log(passangerName + \" \" + gender + \" \" + MealsType + \" \" + age + \" \" + isBusinessClass + \" \" + this.pnr);\n      this.addpassangerModel.passangerName = passangerName;\n      this.addpassangerModel.age = Number(age);\n      this.addpassangerModel.gender = gender;\n      this.addpassangerModel.mealsType = MealsType;\n\n      if (isBusinessClass == \"Business\") {\n        this.addpassangerModel.businessClass = true;\n      } else {\n        this.addpassangerModel.businessClass = false;\n      }\n\n      this.addpassangerModel.userId = this.userId;\n      this.addpassangerModel.pnrNumber = this.pnr;\n      console.log(JSON.stringify(this.addpassangerModel) + \" before\");\n      this.passangerService.savePassangerDetails(this.addpassangerModel).subscribe({\n        next: res => {\n          console.log(JSON.stringify(res));\n          this.loadSummary(this.pnr);\n          this.generateForm();\n        }\n      });\n    }\n\n    loadSummary(pnr) {\n      this.passangerService.getSummary(pnr).subscribe({\n        next: res => {\n          console.log();\n          console.log(\"summary  fetched\");\n          this.summaryModel = res;\n          this.amount = this.summaryModel.amount;\n          console.log(JSON.stringify(this.summaryModel));\n        },\n        error: err => {\n          console.log(\"something went wrong\");\n          console.log(err);\n        }\n      });\n    }\n\n    generateForm() {\n      console.log(this.userId);\n      console.log(this.pnr);\n\n      if (this.isFormRequired == 0) {\n        this.isFormRequired = 1;\n      } else {\n        this.isFormRequired = 0;\n      }\n    }\n\n    deleteTicket(ticketNo) {\n      console.log(ticketNo);\n      this.passangerService.deleteTicket(ticketNo).subscribe({\n        next: res => {\n          console.log(JSON.stringify(res));\n          this.loadSummary(this.pnr);\n        }\n      });\n    }\n\n    finalSubmission() {\n      this.pnrList[0] = this.pnr;\n      this.passangerService.finalSubmission(this.pnrList).subscribe({\n        next: res => {\n          console.log(JSON.stringify(res));\n\n          if (res != null) {\n            this.finalSubmittedData = res;\n            this.router.navigate([\"submit\", this.finalSubmittedData[0].pnrNumber]);\n          }\n        }\n      });\n    }\n\n  }\n\n  PassengerComponent.ɵfac = function PassengerComponent_Factory(t) {\n    return new (t || PassengerComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PassangerService), i0.ɵɵdirectiveInject(i1.Router));\n  };\n\n  PassengerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PassengerComponent,\n    selectors: [[\"app-passenger\"]],\n    decls: 9,\n    vars: 4,\n    consts: [[1, \"addFormbutton\", 3, \"click\"], [\"class\", \"addPassanger\", 3, \"formGroup\", \"submit\", 4, \"ngIf\"], [\"class\", \"summary\", \"border\", \"1\", 4, \"ngIf\"], [\"class\", \"finalAmount\", 4, \"ngIf\"], [1, \"finalSubmitButton\", 3, \"disabled\", \"click\"], [1, \"addPassanger\", 3, \"formGroup\", \"submit\"], [\"for\", \"passangerName\"], [\"type\", \"text\", \"id\", \"passangerName\", \"formControlName\", \"passangerName\"], [\"passangerName\", \"\"], [\"for\", \"age\"], [\"type\", \"text\", \"id\", \"age\", \"formControlName\", \"age\"], [\"Age\", \"\"], [\"for\", \"gender\"], [\"id\", \"gender\", \"formControlName\", \"gender\"], [\"gender\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"mealsType\"], [\"id\", \"mealsType\", \"formControlName\", \"mealsType\"], [\"mealsType\", \"\"], [\"for\", \"isBusinessClass\"], [\"id\", \"isBusinessClass\", \"formControlName\", \"isBusinessClass\"], [\"isBusinessClass\", \"\"], [3, \"disabled\"], [3, \"value\"], [\"border\", \"1\", 1, \"summary\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [1, \"finalAmount\"]],\n    template: function PassengerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"body\");\n        i0.ɵɵelementStart(1, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function PassengerComponent_Template_button_click_1_listener() {\n          return ctx.generateForm();\n        });\n        i0.ɵɵtext(2, \"Add Passangers\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, PassengerComponent_div_3_Template, 37, 5, \"div\", 1);\n        i0.ɵɵtemplate(4, PassengerComponent_table_4_Template, 17, 1, \"table\", 2);\n        i0.ɵɵelement(5, \"br\");\n        i0.ɵɵtemplate(6, PassengerComponent_div_6_Template, 17, 4, \"div\", 3);\n        i0.ɵɵelementStart(7, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function PassengerComponent_Template_button_click_7_listener() {\n          return ctx.finalSubmission();\n        });\n        i0.ɵɵtext(8, \" Submit\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.isFormRequired == 1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.summaryModel.passangerList != null && ctx.summaryModel.passangerList.length != 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.summaryModel.passangerList != null && ctx.summaryModel.passangerList.length != 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", ctx.summaryModel.passangerList == null);\n      }\n    },\n    directives: [i3.NgIf, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName, i4.SelectControlValueAccessor, i3.NgForOf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption],\n    styles: [\"body[_ngcontent-%COMP%]{color:#e6e6fa;font-family:serif;position:fixed;height:100%;width:100%;background-color:#353532;margin:0%;overflow-y:auto}.addFormbutton[_ngcontent-%COMP%]{top:10%}.addPassanger[_ngcontent-%COMP%]{background-color:#5c484c;text-align:center}.summary[_ngcontent-%COMP%]{padding:20px;margin:10px;background-color:#5f9ea0;position:absolute;text-align:center;height:80px;width:68%;top:50%;left:15%}.finalAmount[_ngcontent-%COMP%]{position:fixed;right:0px;bottom:0px;top:60%;right:5%}.finalSubmitButton[_ngcontent-%COMP%]{position:fixed;background-color:green;color:#5a3737;right:0px;bottom:0px;border-radius:20px;width:15%;height:8%}span[_ngcontent-%COMP%]{color:gray}\"]\n  });\n  return PassengerComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}